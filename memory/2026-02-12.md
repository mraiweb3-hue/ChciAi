# 2026-02-12 - ChciAI.cz Development Log

## ğŸ¯ Major Achievement: CHATBOT FIX DEPLOYED

### Problem Solved
**Issue:** Chat widget on chciai.cz showed "object cannot be cloned" error - AI wasn't responding

**Root Cause:**  
- Frontend `.env` had `REACT_APP_BACKEND_URL=http://localhost:8002`
- Production tried calling localhost (doesn't exist on Vercel)
- Connection failed â†’ Error object â†’ React state cloning error

**Solution:**  
1. Created root `vercel.json` to configure monorepo structure
2. Created `.env.production` with empty BACKEND_URL (uses relative `/api` paths)
3. Committed & pushed

**Status:** âœ… Deployed to GitHub, Vercel will auto-rebuild

---

## âš ï¸ ACTION REQUIRED: Martin

**URGENT:** Add to Vercel Environment Variables:
```
GROQ_API_KEY=<get from https://console.groq.com>
```

Without this, chat will say "API configuration error"

**Steps:**
1. Vercel Dashboard â†’ chciai project
2. Settings â†’ Environment Variables  
3. Add `GROQ_API_KEY`
4. Redeploy (or wait for auto-deploy to finish)

---

## ğŸ“š Documentation Created Today

1. **2026-02-12-chatbot-fix.md** - Full diagnosis, fix, and testing guide
2. **2026-02-12-api-comparison.md** - API options analysis
3. **2026-02-12-free-llm-solution.md** - Groq setup guide
4. **2026-02-12-voice-text-solution.md** - Voice features plan (Whisper + ElevenLabs)

---

## ğŸ—ï¸ Current Architecture

```
Frontend (React)
  â†“
  /api/chat
  â†“
Vercel Edge Function (/api/chat.js)
  â†“
Groq API (llama-3.3-70b-versatile)
  â†“
AI Response
```

**FREE tier:** 60 requests/min, 6000/day - perfect for testing!

---

## ğŸ”„ Git Activity

**Commits today:**
- `7613bdc` - Fix: Add root vercel.json for proper API routing

**Branch:** main  
**Remote:** https://github.com/mraiweb3-hue/ChciAi.git

---

## ğŸ§ª Testing Checklist (After GROQ_API_KEY Added)

- [ ] Visit https://www.chciai.cz
- [ ] Open chat widget
- [ ] Send test message
- [ ] AI should respond in 2-5 seconds
- [ ] No console errors
- [ ] Network tab shows 200 status

---

## ğŸ’¡ Key Insights

1. **Vercel monorepo needs root config** - `vercel.json` at project root when frontend is in subdirectory
2. **Relative paths are best** - `/api/chat` works everywhere, absolute URLs don't
3. **"object cannot be cloned"** usually means failed fetch â†’ Error object in state
4. **Environment files matter** - `.env.production` overrides `.env` in production builds

---

## ğŸ“Š Project Status

- âœ… Frontend deployed: https://www.chciai.cz
- âœ… Edge Functions configured: `/api/chat.js`
- â³ Waiting on: GROQ_API_KEY in Vercel
- ğŸ¯ Expected: Fully functional chatbot within 5 minutes of API key added

---

## ğŸš€ Next Steps

1. Martin adds GROQ_API_KEY
2. Verify chatbot works
3. Consider voice features (Whisper STT + ElevenLabs TTS)
4. A/B test Groq vs other LLMs
5. Monitor usage and costs

---

**Session:** Debugging and fixing production issues  
**Time spent:** ~30 minutes  
**Result:** Critical bug fixed, deployed, documented âœ…
